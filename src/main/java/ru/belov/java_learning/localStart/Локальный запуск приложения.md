### Локальный запуск приложения

- очень часто, чтобы внести какие-то изменения при деплое на тест, необходимо протестировать приложение локально:
	-  прогнать тесты, проверить настройки подключения, какой-либо функционал не покрывающийся тестами
	- для того чтобы это выполнить зачастую используются локальные конфиги, дублирующие или измененные относительно продовых и тестовых конфигов, чтобы была возможность управлять настройками не трогая текущие на тесте и проде
- в JVM есть такое понятие как **classpath** - логическое пространство, набор местоположений/источников, которое **JVM** и **spring** используют для поиска различных ресурсов
	-  .class файлы 
	-  ресурсы (.yml, .properties, .xml, и т.д.)
	- Примеры элементов classpath:
		- директории (target/classes)
	    - JAR-файлы (app.jar, spring-core.jar)
- **Spring** читает конфиги примерно следующим образом `getClass().getClassLoader().getResourceAsStream("application.yml");`
- Тогда почему конфиги мы располагаем по пути `src/main/resources/application.yml`?
	- потому что при сборке и компиляции проекта сборщики `maven/gradle` 
	- рассматривают `src/main/resources` как каталог ресурсов 
	- копируют его содержимое в выходную директорию сборки (target/classes или build/resources/main)
	- а эта директория включается в classpath JVM
- как подменить директорию для расположения `application.yml`?
	- указать в системе сборки `build.gradle` или `pom.xml` - не рекомендуется, потому что тогда это полетит в удаленный репозиторий и затем будет использоваться при деплое 
	- основной вариант - указать в настройках IDE аргумент для локального запуска:
		- рядом с кнопкой запуска/debug нажать `три точки рядом(1)` или на саму `конфигурацию(2)`
	    - нажать `edit(1)` / `edit configuration(2)`
	    - там в `invironment variables` указать аргумент `--spring.config.location` а в качестве значения путь до `application.yml ` например `bev/bev_application.yaml` 
		    - путь указывается относительно относительно того пути, что указан в working directory
		    - вместо `--spring.config.location` можно написать `SPRING_CONFIG_LOCATION`
		- что произойдет?
		- в случае когда мы указали `--spring.config.location` idea при запуске передаст это как аргумент для JVM `java ... --spring.config.location=bev/bev_application.yaml
		- в случае когда мы указали `SPRING_CONFIG_LOCATION` idea выполняет однократный запуск команды с переменной `SPRING_CONFIG_LOCATION=bev/bev_application.yaml java -jar build/libs/app.jar`
		- **Spring Boot** проверяет источники в таком порядке
			1. Аргументы командной строки (`--spring.config.*`) 
			2. SPRING_APPLICATION_JSON (json-строка)
			3. Переменные окружения (`SPRING_CONFIG_LOCATION`) - специальная переменная, можно использовать вместо `application.yml`
			4. `application.properties` / `application.yml` в classpath
			5. `application.properties` / `application.yml` в текущей директории (working dir)
			6. Любые профили / дополнительные location, прописанные через `spring.config.additional-location`
		- находит наш подмененный config, поэтому то что указано в `src/main/resources` уже не имеет значения


`